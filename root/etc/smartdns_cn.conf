user nobody
cache-size 2048
cache-file /tmp/smartdns_cn.cache
cache-checkpoint-time 600
serve-expired yes
prefetch-domain yes
cache-persist yes
bind 0.0.0.0:7800
bind-tcp 0.0.0.0:7800

rr-ttl-min 300
max-reply-ip-num 4
rr-ttl-reply-max 120
expand-ptr-from-address yes
response-mode fastest-ip
speed-check-mode tcp:443,tcp:8443,tcp:80,tcp:8080,ping
domain-rules /m-team.cc/ -c tcp:443
domain-rules /github.com/ -c tcp:22,tcp:443
domain-rules /api.github.com/ -c tcp:443

dualstack-ip-selection no
force-AAAA-SOA yes
force-qtype-SOA 65

log-level info
log-file /var/log/smartdns/smartdns_cn.log
log-size 256K
log-num 3

address /dns11.quad9.net/149.112.112.11

cname /tpa-hcdn.iqiyi.com/data.video.iqiyi.com
cname /test1.jsdelivr.net/fastly.jsdelivr.net
cname /pool.ntp.org/ntp.tencent.com
cname /stdtime.gov.hk/ntp.tencent.com
cname /time.smg.gov.mo/ntp.tencent.com
cname /ntp.nasa.gov/ntp.tencent.com
cname /time.nist.gov/ntp.tencent.com
cname /time-a.nist.gov/ntp.tencent.com
cname /time-b.nist.gov/ntp.tencent.com
cname /time-nw.nist.gov/ntp.tencent.com
cname /clock.via.net/ntp.tencent.com
cname /time.apple.com/ntp.tencent.com
cname /time.asia.apple.com/ntp.tencent.com
cname /time.google.com/ntp.tencent.com
cname /time.windows.com/ntp.tencent.com
cname /time.cloudflare.com/ntp.tencent.com
cname /time.windows.com/ntp.tencent.com
cname /ntp.ubuntu.com/ntp.tencent.com

ignore-ip 116.211.136.0/22
ignore-ip 113.197.104.0/23
ignore-ip 203.208.32.0/19
server 223.5.5.5 -bootstrap-dns
server 223.6.6.6 -bootstrap-dns
server 119.29.29.29 -bootstrap-dns
server-tcp 119.29.29.29 -bootstrap-dns
server 120.53.80.136 -bootstrap-dns
server-tcp 120.53.80.136 -bootstrap-dns
server 175.24.219.66 -bootstrap-dns
server-tcp 175.24.219.66 -bootstrap-dns

server-tls 120.53.53.53:853 -host-name dot.pub -tls-host-verify dot.pub
server-tls dot.360.cn:853 -host-name dot.360.cn -tls-host-verify dot.360.cn
server-https https://1.12.12.12/dns-query -host-name doh.pub -tls-host-verify doh.pu
server-https https://223.5.5.5/dns-query -host-name dns.alidns.com -tls-host-verify dns.alidns.com
server-https https://223.6.6.6/dns-query -host-name dns.alidns.com -tls-host-verify dns.alidns.com
server-https https://doh.360.cn/dns-query -host-name doh.360.cn -tls-host-verify doh.360.cn

# CN-CDN
server 202.141.162.123 -group cdn -exclude-default-group
server-tcp 202.141.162.123 -group cdn -exclude-default-group
server 202.141.176.93 -group cdn -exclude-default-group
server-tcp 202.141.176.93 -group cdn -exclude-default-group
server 61.132.163.68 -group cdn -exclude-default-group
server-tcp 61.132.163.68 -group cdn -exclude-default-group
server 202.102.213.68 -group cdn -exclude-default-group
server-tcp 202.102.213.68 -group cdn -exclude-default-group
server 118.118.118.118 -group cdn -exclude-default-group
server-tcp 118.118.118.118 -group cdn -exclude-default-group

domain-rules /360buyimg.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /aicdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /alicdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /bootcdn.net/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /douyincdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /douyinvod.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /elemecdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /momentcdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /qcloudcdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /qihucdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /qiniucdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /sogoucdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /taobaocdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /tmall.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /tbcdn.cn/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /tbcdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /vpgcdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /weibocdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /xmcdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /xycdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /yecdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /qtlcdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /mwcname.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /alikunlun.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /ks-cdn.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /zhimg.com/ -nameserver cdn -speed-check-mode tcp:443,ping
domain-rules /qpic.cn/ -nameserver cdn -speed-check-mode tcp:443,ping
